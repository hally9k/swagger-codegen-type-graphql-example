# SwaggerCodegen & TypeGraphQL for autonomous teams working with RESTful services

This repo is intended as a POC for the use of [Swagger Codegen](https://swagger.io/tools/swagger-codegen/) and [Type GraphQL](https://typegraphql.ml) as a low touch way to create GraphQL **View Model** services for consumption by frontend apps in place of RESTful APIs.

## The Motivation

The motivation here is to release the RESTful services from the data modelling demands of frontend apps and to remove the complex data fetching and REST endpoint coordination code required to build these view models in the frontend.

I put emphasis on the _view model_ part of GraphQL **View Model** services. This is important for a few reasons, I have seen many projects providing GraphQL services that just serve the normalized entity models in a query-able form, this doesn't leverage the full conceptual power of GraphQL and leaves a lot on the table IMO. If we can provide a deeply _domain centric_ schema that allows view models to be dynamically built and consumed by multiple apps we can deliver the promise of declarative data in the front end where the declarations are relevant and understandable. [This tweet by @sophiebits of the React core team](https://twitter.com/sophiebits/status/1138879923362455553) was formative in my recent thinking around this.

This stack coupled with [Apollo Schema Federation](https://www.apollographql.com/docs/apollo-server/federation/federation-spec/) is intended to enable autonomous teams that are currently working with RESTful APIs to quickly write services that serve the perfect view model expressed with the ubiquitous language of their bounded context.

## The Tech

**Swagger Codegen** is used to generate a typescript SDK for the given RESTful api, this is based on the Swagger documentation provided and is dependent on it's validity and completeness.

The `/typescript-node-client` directory is generated by running `npm run code-gen`. This pulls a docker container hat runs the Swagger Codegen jar file and outputs the generated SDK files.

**Type GraphQL** is used to declaratively define the GraphQL schema with typescript types. In the `/src` directory the `/src/auth.ts`, `/src/user.ts` and the `/src/installation.ts` files represent entities in the schema. In those files you'll see the `@ObjectType()` decorator atop the schema entity types and the `@Resolver()` decorator atop the resolver functions for their respective types.

Inside the the resolver functions we use the Swagger Codegen SDK directly to coordinate requests to the RESTful endpoints and build the domain specific view model.

## TODO
- [x] Write meaningful view model resolver examples.
- [ ] Split services and POC the use of Apollo Schema Federation: Blocked by: https://github.com/19majkel94/type-graphql/issues/351
- [ ] Write a client example and show useful frontend patterns with the new Apollo hooks api.  
